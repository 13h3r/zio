<html><head><title>: Running Effects</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="ZIO contributors" /><meta name="description" content="Type-safe, composable asynchronous and concurrent programming for Scala" /><meta name="og:image" content="/scalaz-zio/img/poster.png" /><meta name="image" property="og:image" content="/scalaz-zio/img/poster.png" /><meta name="og:title" content=": Running Effects" /><meta name="title" property="og:title" content=": Running Effects" /><meta name="og:site_name" content="" /><meta name="og:url" content="https://scalaz.github.io/scalaz-zio/" /><meta name="og:type" content="website" /><meta name="og:description" content="Type-safe, composable asynchronous and concurrent programming for Scala" /><link rel="icon" type="image/png" href="/scalaz-zio/img/favicon.png" /><meta name="twitter:title" content=": Running Effects" /><meta name="twitter:image" content="/scalaz-zio/img/poster.png" /><meta name="twitter:description" content="Type-safe, composable asynchronous and concurrent programming for Scala" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="512x512" href="/scalaz-zio/img/favicon.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scalaz-zio/highlight/styles/default.css" /><link rel="stylesheet" href="/scalaz-zio/css/style.css" /><link rel="stylesheet" href="/scalaz-zio/css/palette.css" /><link rel="stylesheet" href="/scalaz-zio/css/codemirror.css" /><link rel="stylesheet" href="/scalaz-zio/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scalaz-zio/" class="brand"><div class="brand-wrapper"><span></span></div></a></li> <li><a href="/scalaz-zio/overview/" class="">Overview</a> <ul class="sub_section"> <li><a href="/scalaz-zio/overview/background.html" class="">Background</a></li> <li><a href="/scalaz-zio/overview/index.html" class="">Overview</a></li> <li><a href="/scalaz-zio/overview/creating_effects.html" class="">Creating Effects</a></li> <li><a href="/scalaz-zio/overview/basic_operations.html" class="">Basic Operations</a></li> <li><a href="/scalaz-zio/overview/handling_errors.html" class="">Handling Errors</a></li> <li><a href="/scalaz-zio/overview/handling_resources.html" class="">Handling Resources</a></li> <li><a href="/scalaz-zio/overview/basic_concurrency.html" class="">Basic Concurrency</a></li> <li><a href="/scalaz-zio/overview/testing_effects.html" class="">Testing Effects</a></li> <li><a href="/scalaz-zio/overview/running_effects.html" class=" active ">Running Effects</a></li></ul></li>    </ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/scalaz/scalaz-zio"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/scalaz/scalaz-zio"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter(' Type-safe, composable asynchronous and concurrent programming for Scala');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook(' Type-safe, composable asynchronous and concurrent programming for Scala');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="scalaz" data-github-repo="scalaz-zio"><div class="content-wrapper"><section><h1 id="running-effects">Running Effects</h1>

<p>Once you have constructed an effect, you have a choice about how to run it.</p>

<h1 id="app">App</h1>

<p>If you construct a single effect for your whole program, then the most natural way to run the effect is to extend <code class="highlighter-rouge">scalaz.zio.App</code>.</p>

<p>This class provides Scala with a main function, so it can be called from IDEs and launched from the command-line. All you have to do is implement the <code class="highlighter-rouge">run</code> method, which will be passed command-line arguments in a <code class="highlighter-rouge">List</code>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">scalaz.zio._</span>
<span class="k">import</span> <span class="nn">scalaz.zio.console._</span>

<span class="k">object</span> <span class="nc">MyApp</span> <span class="k">extends</span> <span class="nc">App</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">run</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="k">=</span>
    <span class="n">myAppLogic</span><span class="o">.</span><span class="n">fold</span><span class="o">(</span><span class="k">_</span> <span class="k">=&gt;</span> <span class="mi">1</span><span class="o">,</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="mi">0</span><span class="o">)</span>

  <span class="k">val</span> <span class="n">myAppLogic</span> <span class="k">=</span>
    <span class="k">for</span> <span class="o">{</span>
      <span class="k">_</span> <span class="k">&lt;-</span> <span class="n">putStrLn</span><span class="o">(</span><span class="s">"Hello! What is your name?"</span><span class="o">)</span>
      <span class="n">n</span> <span class="k">&lt;-</span> <span class="n">getStrLn</span>
      <span class="k">_</span> <span class="k">&lt;-</span> <span class="n">putStrLn</span><span class="o">(</span><span class="n">s</span><span class="s">"Hello, ${n}, welcome to ZIO!"</span><span class="o">)</span>
    <span class="o">}</span> <span class="k">yield</span> <span class="o">()</span>
<span class="o">}</span>
</code></pre></div></div>

<p>If you are using a custom environment for your application, you will have to supply your environment to the effect (using <code class="highlighter-rouge">ZIO#provide</code>) before you return it from <code class="highlighter-rouge">run</code>, because <code class="highlighter-rouge">App</code> does not know how to supply custom environments.</p>

<h1 id="defaultruntime">DefaultRuntime</h1>

<p>Most applications are not greenfield, and must integrate with legacy code, and non-functional libraries and frameworks.</p>

<p>In these cases, a better solution for running effects is to create a <code class="highlighter-rouge">Runtime</code>, which can be passed around and used to run effects wherever required.</p>

<p>ZIO contains a default runtime called <code class="highlighter-rouge">DefaultRuntime</code>. This bundles together all ZIO environments (including <code class="highlighter-rouge">Console</code>, <code class="highlighter-rouge">System</code>, <code class="highlighter-rouge">Clock</code>, <code class="highlighter-rouge">Random</code>, <code class="highlighter-rouge">Scheduler</code>, and on the JVM, <code class="highlighter-rouge">Blocking</code>), and can run effects requiring one or more of these environments.</p>

<p>To create a <code class="highlighter-rouge">DefaultRuntime</code>, merely use the <code class="highlighter-rouge">new</code> keyword:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="n">runtime</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">DefaultRuntime</span> <span class="o">{}</span>
</code></pre></div></div>

<p>Once you have a runtime, you can use it to execute effects:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">runtime</span><span class="o">.</span><span class="n">unsafeRun</span><span class="o">(</span><span class="n">putStrLn</span><span class="o">(</span><span class="s">"Hello World!"</span><span class="o">))</span>
</code></pre></div></div>

<h1 id="custom-runtime">Custom Runtime</h1>

<p>If you are using a custom environment for your application, then you may find it useful to create a <code class="highlighter-rouge">Runtime</code> specifically tailed for that environment.</p>

<p>A custom <code class="highlighter-rouge">Runtime[R]</code> can be created with two values:</p>

<ul>
  <li><strong><code class="highlighter-rouge">R</code> Environment</strong>. You must supply the environment that will be used to run effects.</li>
  <li><strong><code class="highlighter-rouge">Platform</code></strong>. You must supply a <code class="highlighter-rouge">Platform</code>, which contains platform-specific features required for bootstrapping ZIO.</li>
</ul>

<p>For example, the following creates a <code class="highlighter-rouge">Runtime</code> that can provide an <code class="highlighter-rouge">Int</code> to effects, using the default <code class="highlighter-rouge">Platform</code> provided by ZIO:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">scalaz.zio.internal.PlatformLive</span>

<span class="k">val</span> <span class="n">myRuntime</span><span class="k">:</span> <span class="kt">Runtime</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Runtime</span><span class="o">(</span><span class="mi">42</span><span class="o">,</span> <span class="nc">PlatformLive</span><span class="o">.</span><span class="nc">Default</span><span class="o">)</span>
</code></pre></div></div>

<h1 id="next-steps">Next Steps</h1>

<p>If you are comfortable with running effects, then congratulations! You are now ready to dive into other sections on the ZIO microsite, covering data types, use cases, and interop with other systems. Refer to the Scaladoc for detailed documentation on all the core ZIO types and methods.</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scalaz-zio/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script><script>((window.gitter = {}).chat = {}).options = {
room: 'scalaz/scalaz-zio'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/scalaz-zio/js/main.js"></script></body></html>