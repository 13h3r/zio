<html><head><title>: Cats Effect</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="ZIO contributors" /><meta name="description" content="Type-safe, composable asynchronous and concurrent programming for Scala" /><meta name="og:image" content="/scalaz-zio/img/poster.png" /><meta name="image" property="og:image" content="/scalaz-zio/img/poster.png" /><meta name="og:title" content=": Cats Effect" /><meta name="title" property="og:title" content=": Cats Effect" /><meta name="og:site_name" content="" /><meta name="og:url" content="https://scalaz.github.io/scalaz-zio/" /><meta name="og:type" content="website" /><meta name="og:description" content="Type-safe, composable asynchronous and concurrent programming for Scala" /><link rel="icon" type="image/png" href="/scalaz-zio/img/favicon.png" /><meta name="twitter:title" content=": Cats Effect" /><meta name="twitter:image" content="/scalaz-zio/img/poster.png" /><meta name="twitter:description" content="Type-safe, composable asynchronous and concurrent programming for Scala" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="512x512" href="/scalaz-zio/img/favicon.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scalaz-zio/highlight/styles/default.css" /><link rel="stylesheet" href="/scalaz-zio/css/style.css" /><link rel="stylesheet" href="/scalaz-zio/css/palette.css" /><link rel="stylesheet" href="/scalaz-zio/css/codemirror.css" /><link rel="stylesheet" href="/scalaz-zio/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scalaz-zio/" class="brand"><div class="brand-wrapper"><span></span></div></a></li>   <li><a href="/scalaz-zio/interop/" class="">Interop</a> <ul class="sub_section"> <li><a href="/scalaz-zio/interop/catseffect.html" class=" active ">Cats Effect</a></li> <li><a href="/scalaz-zio/interop/future.html" class="">Future</a></li> <li><a href="/scalaz-zio/interop/java.html" class="">Java</a></li> <li><a href="/scalaz-zio/interop/javascript.html" class="">Javascript</a></li> <li><a href="/scalaz-zio/interop/monix.html" class="">Monix</a></li> <li><a href="/scalaz-zio/interop/scalaz7x.html" class="">Scalaz 7.x</a></li> <li><a href="/scalaz-zio/interop/scalaz8.html" class="">Scalaz 8</a></li></ul></li>  </ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/scalaz/scalaz-zio"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/scalaz/scalaz-zio"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="scalaz" data-github-repo="scalaz-zio"><div class="content-wrapper"><section><h1 id="cats-effect">Cats Effect</h1>

<p>Checkout <code class="highlighter-rouge">interop-cats</code> module for inter-operation support.</p>

<h3 id="io-cats-effects-instances"><code class="highlighter-rouge">IO</code> Cats Effect’s instances</h3>

<p><strong>ZIO</strong> integrates with Typelevel libraries by providing an instance of <code class="highlighter-rouge">ConcurrentEffect</code> for <code class="highlighter-rouge">IO</code> as required, for instance, by <code class="highlighter-rouge">fs2</code>, <code class="highlighter-rouge">doobie</code> and <code class="highlighter-rouge">http4s</code>. Actually, I lied a little bit, it is not possible to implement <code class="highlighter-rouge">ConcurrentEffect</code> for any error type since <code class="highlighter-rouge">ConcurrentEffect</code> extends <code class="highlighter-rouge">MonadError</code> of <code class="highlighter-rouge">Throwable</code>.</p>

<p>For convenience we have defined an alias as follow:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">type</span> <span class="kt">Task</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="nc">IO</span><span class="o">[</span><span class="kt">Throwable</span>, <span class="kt">A</span><span class="o">]</span>
</code></pre></div></div>

<p>Therefore, we provide an instance of <code class="highlighter-rouge">ConcurrentEffect[Task]</code>.</p>

<h4 id="timer">Timer</h4>

<p>In order to get a <code class="highlighter-rouge">cats.effect.Timer[Task]</code> instance we need an extra import:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">scalaz.zio.interop.catz.implicits._</span>
</code></pre></div></div>

<p>The reason it is not provided by the default “interop” import is that it makes testing programs that require timing capabilities hard so an extra import wherever needed makes reasoning about it much easier.</p>

<h4 id="example">Example</h4>

<p>The following example shows how to use ZIO with Doobie (a library for JDBC access) and FS2 (a streaming library), which both rely on Cats Effect instances:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">doobie.imports._</span>
<span class="k">import</span> <span class="nn">fs2.Stream</span>
<span class="k">import</span> <span class="nn">scalaz.zio.Task</span>
<span class="k">import</span> <span class="nn">scalaz.zio.interop.catz._</span>

<span class="k">val</span> <span class="n">xa</span><span class="k">:</span> <span class="kt">Transactor</span><span class="o">[</span><span class="kt">Task</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Transactor</span><span class="o">.</span><span class="n">fromDriverManager</span><span class="o">[</span><span class="kt">Task</span><span class="o">](...)</span>

<span class="k">def</span> <span class="n">loadUsers</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">Task</span>, <span class="kt">User</span><span class="o">]</span> <span class="k">=</span>
  <span class="n">sql</span><span class="s">"""SELECT * FROM users"""</span><span class="o">.</span><span class="n">query</span><span class="o">[</span><span class="kt">User</span><span class="o">].</span><span class="n">stream</span><span class="o">.</span><span class="n">transact</span><span class="o">(</span><span class="n">xa</span><span class="o">)</span>

<span class="k">val</span> <span class="n">allUsers</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">User</span><span class="o">]</span> <span class="k">=</span> <span class="n">unsafeRun</span><span class="o">(</span><span class="n">loadUsers</span><span class="o">.</span><span class="n">compile</span><span class="o">.</span><span class="n">toList</span><span class="o">)</span>
</code></pre></div></div>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scalaz-zio/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script><script>((window.gitter = {}).chat = {}).options = {
room: 'scalaz/scalaz-zio'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/scalaz-zio/js/main.js"></script></body></html>